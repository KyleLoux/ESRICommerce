<div data-sly-use.data="cart.js"></div>

<div data-sly-test="${wcmmode.edit}" class="cq-placeholder" data-emptytext="Cart"></div>
<sly data-sly-use.clientLib="${'/libs/granite/sightly/templates/clientlib.html'}"/> 
<sly data-sly-call="${clientLib.css @ categories='cart'}" />
<div data-sly-call="${clientLib.all @ categories='granite.csrf.standalone'}"></div>
<div data-sly-use.access="${'esri.commerce.esri.core.services.AccessToken'}"></div>
<div data-sly-use.getTotalPrice="${'esri.commerce.esri.core.services.GetTotalPrice' @ locale=data.locale, token=access.token, secret=access.secret, skus=data.skus, quantities=data.quantities}"></div>

<!--INSERT CODE FOR CART TABLE HEADERS-->
<div class="grid-container">
    <div class="column-24 mainContent">
        <div class="column-12 productContent">
            <h3 class="cartText font-size-6">Cart</h3>
        </div>
        <div class="column-6 productContent">
            <h3 class="font-size-2" style="margin-top: 35px;">Price</h3>
        </div>
        <div class="column-6 productContent">
            <h3 class="font-size-2" style="margin-top: 35px;">Quantity</h3>
        </div>
    </div>
</div>

<!--MODAL CONTENT-->
    <div class="js-modal modal-overlay " data-modal="extensionLicense">
        <div class="modal-content column-12" aria-labelledby="modal" role="dialog">
            <a class="js-modal-toggle right link-blue" href="#" aria-label="close-modal">
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 32 32" class="svg-icon"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg>
            </a>
            <h3 class="trailer-half font-size-2"><i>Product Name</i> will be assigned to the following ArcGIS Desktop licenses</h3>

<!-- LICENSE PULL-DOWN MENUS FOR MODAL - REPEAT SECTION AND OPTION ID AS NECESSARY-->
            <p style="text-align: center;">
                <select id="licenseType">
                    <option value="">Choose an ArcGIS Desktop License</option>
                    <option value="">Product Name - Expiring Date</option>
                    <option value="">Product Name - Expiring Date</option>
                </select>
            </p>
<!-- END LICENSE PULL-DOWN MENUS ^^ copy from <p> to </p> to REPEAT THE MENU BASED ON THE NUMBER OF OPTIONS -->
            <p style="text-align: center;">
                <button class="btn details btn-fill" style="width: 45%;">Confirm</button>
            </p>
            <p class="font-size--1" style="text-align: center;">Prorated terms and pricing for extensions will be reflected in the cart.</p>
        </div>
            <div class="text-right">
                <button class="btn js-modal-toggle">okay</button>
                <button class="btn-clear js-modal-toggle">cancel</button>
            </div>
        </div>
    </div>
<!-- END MODAL CONTENT -->

<!-- BEGIN CART CONTENTS SECTION - REPEAT ENTIRE SECTION BELOW AS OFTEN AS NECESSARY FOR NUMBER OF PRODUCTS IN CART -->
<div class="grid-container cartRule"></div>
<div class="grid-container" style="margin-bottom:25px;" data-sly-list.item="${data.cart.products}">
    <div class="column-24 mainContent">
        <div class="column-3 productContent">
            <img src="${data.products[itemList.index].image}" style="width:100px; height: 100px;" alt="Insert Image Here">
            <form id="remove${itemList.index}" method="POST" action="${ resource.path }.delete.html">
                <input type="hidden" name="entryNumber" value="${ itemList.index }"/>
                <input type="hidden" name="redirect" value="${ currentPage.path }.html"/>
                <button type="submit" class="btn btn-default btn-icon"><i class="fa fa-trash"></i>Remove</button>
                <!-- <p>
                	<a class="link-blue" href="javascript:$('remove${itemList.index}').submit();">Remove</a>
            	</p> -->
            </form>
        </div>
        <div class="column-9 productContent">
            <p class="addInfo font-size-2">${item.getProduct.getTitle}</p>
            <p data-sly-test="${data.products[itemList.index].license}" class="addInfo font-size--1">License Type: ${data.products[itemList.index].license}</p>
            <p data-sly-test="${data.products[itemList.index].license == 'One-Year Subscription'}"class="addInfo font-size--1">Start Date: ${data.products[itemList.index].startDate}</p>
            <p data-sly-test="${data.products[itemList.index].license == 'One-Year Subscription'}"class="addInfo font-size--1">End Date: ${data.products[itemList.index].endDate}</p>
        </div>
        <div data-sly-use.getPrice="${'esri.commerce.esri.core.services.GetPrice' @ locale=data.locale, token=access.token, secret=access.secret, sku=data.products[itemList.index].sku}"></div>        
        <div class="column-6 productContent">
            <p class="font-size-2 price" style="margin-top:5px;">$ ${getPrice.product.esriListUnitPrice}

<!-- TOOLTIP FOR PRORATED PRICING - COMMENT AND UNCOMMENT AS NECESSARY -->
                <a class="tooltip tooltip-multiline tooltip-right" aria-label="This is a prorated price based on a prorated subscription." ><span class="icon-ui-description icon-ui-blue"></span></a>
<!-- END TOOLTIP FOR PRORATED PRICING -->

            </p>
        </div>
        <div class="column-6 productContent">
            <p><input onchange="updateCart(${resource})" class="quantitySelector" id="${itemList.index}" min="0" value="${item.getQuantity}" style="margin-left:10px; width: 70px; display: inline-block !important;" required="" aria-required="true" type="number"></p>
        </div>
    </div>
</div>
<!-- END CART CONTENTS SECTION - ^^ GRAB ALL CODE ABOVE FOR REPEAT-->


<!-- CHOOSE LICENSE TO ADD EXTENSION TO SECTION (BOX AS PER WIREFRAME CART - EXT PRORATION- STEP 1 SHOULD BE REPEATED FOR EACH PRODUCT THAT NEEDS IT FROM ABOVE (IF APPLICABLE)-->
<div hidden class="grid-container" style="margin-bottom:25px"">
    <div class="column-24 mainContent">
        <div class="column-3 productContent">
            <h3 class="cartText font-size-6"></h3>
        </div>
        <div class="column-9 extensionAdd" style="border: 2px solid #ccc; padding: 25px;">
            <p class="addInfo font-size-2">Which ArcGIS Desktop licenses would you like to use your new extensions with?</p><br />
            <p class="addInfo font-size--1">Each ArcGIS extension purchased needs to be assigned to an ArcGIS Desktop Core Software License that you currently own or are buying.</p>
            <p style="margin: 0 !important;">

                <a class="js-modal-toggle btn details btn-fill" style="width: 35%; margin-top: 25px;" href="" data-modal="extensionLicense">Choose Now</a>
            </p>
        </div>
    </div>
</div>
<!-- END ADD EXTENSION TO SECTION -->

<!-- DIV TO SEPARATE CART CONTENTS FROM SUBTOTAL -->
<div class="grid-container cartRule"></div>
<!-- END SEPARATOR DIV-->

<!-- BEGIN SUBTOTAL, TAX, CHECKOUT, CONTINUE SHOPPING SECTION -->
<div class="grid-container">
    <div class="column-20 mainContent">
        <div class="column-13 productContent">
            <h3 class="cartText font-size-6"></h3>
        </div>
        <div class="column-4 productContent" style="text-align: right;">
            <!-- <h3 class="font-size-2" style="margin-top: 25px;">Cart Subtotal</h3>
            <h3 class="font-size-2" style="margin-top: 20px;">Estimated Tax</h3> -->
            <h3 class="font-size-2" style="margin-top: 20px; font-weight: bold !important;">Subtotal</h3>
        </div>
        <div class="column-3 productContent" style="text-align: right;">
            <!-- <h3 class="font-size-2" style="margin-top: 25px;">$ Amount1</h3>
            <h3 class="font-size-2" style="margin-top: 20px;">$ Amount2</h3> -->
            <h3 class="font-size-2" style="margin-top: 20px; font-weight: bold !important;">$ ${getTotalPrice.getTotalPrice}</h3>

        </div>
    </div>
</div>
<div class="grid-container">
    <div class="column-20 checkoutContent">
        <div class="column-13 productContent">
            <h3 class="cartText font-size-6"></h3>
        </div>
        <div class="column-7 productContent">
            <p style="text-align: right;">
                <button class="btn details btn-fill" style="width: 65%;">Proceed to Checkout</button>
            </p>
            <p style="text-align: right; margin-right: 60px;">
                <a href="${data.storefrontPath}.html" class="link-blue">Continue Shopping</a>
            </p>
        </div>
    </div>
</div>

<!-- END SUBTOTAL, TAX, CHECKOUT, CONTINUE SHOPPING SECTION -->

<sly data-sly-call="${clientLib.js @ categories='cart'}" />



